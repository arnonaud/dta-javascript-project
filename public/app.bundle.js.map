{"version":3,"sources":["webpack:///webpack/bootstrap 49564f50d2f7f4157597","webpack:///./src/app.js","webpack:///./src/services/recipes.service.js","webpack:///./src/services/pizzeria.service.js"],"names":["recipesService","pizzeriaService","start","makePizza","name","sendPizza","RecipeService","recipes","fetch","then","response","json","Promise","resolve","recipe","pizza","toppings","length","reduce","acc","topping","indexOf","lastIndexOf","getRecipes","isRecipeCompliant","find","map","query","filter","toLowerCase","includes","PizzeriaService","pool","intervalId","setInterval","console","log","alea","Math","floor","random","getRecipe","push","id","clearInterval","pizzaName","idx","splice"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA;;AACA;;AAEA,KAAMA,iBAAiB,4BAAvB;AACA,KAAMC,kBAAkB,8BAAoBD,cAApB,CAAxB;;AAEAC,iBAAgBC,KAAhB;;AAGA,UAASC,SAAT,CAAoBC,IAApB,EAA0B;AACtBH,qBAAgBI,SAAhB,CAA0BD,IAA1B;AACH,E;;;;;;;;;;;;;;;;KCXYE,a,WAAAA,a;AACT,8BAAa;AAAA;;AACT,cAAKC,OAAL,GAAe,IAAf;AACH;;;;sCAGU;AAAA;;AACP,iBAAG,CAAC,KAAKA,OAAT,EAAiB;AACb,wBAAOC,MAAM,+BAAN,EACUC,IADV,CACe;AAAA,4BAAYC,SAASC,IAAT,EAAZ;AAAA,kBADf,EAEUF,IAFV,CAEe;AAAA,4BAAW,MAAKF,OAAL,GAAeA,OAA1B;AAAA,kBAFf,CAAP;AAGH,cAJD,MAKK;AACD,wBAAOK,QAAQC,OAAR,CAAgB,KAAKN,OAArB,CAAP;AACH;AACJ;;;2CAGiBO,M,EAAQC,K,EAAO;AAC7B,iBAAID,OAAOE,QAAP,CAAgBC,MAAhB,KAA2BF,MAAMC,QAAN,CAAeC,MAA9C,EAAsD,OAAO,KAAP;;AAEtD,oBAAOF,MAAMC,QAAN,CAAeE,MAAf,CAAsB,UAACC,GAAD,EAAMC,OAAN;AAAA,wBACzBD,OACGL,OAAOE,QAAP,CAAgBK,OAAhB,CAAwBD,OAAxB,MAAqC,CAAC,CADzC,IAEGL,MAAMC,QAAN,CAAeK,OAAf,CAAuBD,OAAvB,MAAoCL,MAAMC,QAAN,CAAeM,WAAf,CAA2BF,OAA3B,CAHd;AAAA,cAAtB,EAID,IAJC,CAAP;AAKH;;;4CAEkBL,K,EAAM;AAAA;;AACrB,oBAAO,KAAKQ,UAAL,GACFd,IADE,CACG,mBAAW;AACb,wBAAOF,QAAQW,MAAR,CACH,UAACC,GAAD,EAAKL,MAAL;AAAA,4BACAK,QACI,OAAKK,iBAAL,CAAuBV,MAAvB,EAA8BC,KAA9B,IAAuCD,OAAOV,IAA9C,GAAqD,KADzD,CADA;AAAA,kBADG,EAIN,KAJM,CAAP;AAKH,cAPE,CAAP;AAQH;;;mCAESA,I,EAAK;AACX,oBAAO,KAAKmB,UAAL,GACKd,IADL,CACU;AAAA,wBAAWF,QACPkB,IADO,CACF;AAAA,4BAAUX,OAAOV,IAAP,KAAgBA,IAA1B;AAAA,kBADE,CAAX;AAAA,cADV,CAAP;AAGH;;;2CAGgB;AACb,oBAAO,KAAKmB,UAAL,GACKd,IADL,CACU;AAAA,wBAAWF,QACPmB,GADO,CACH;AAAA,4BAAUZ,OAAOV,IAAjB;AAAA,kBADG,CAAX;AAAA,cADV,CAAP;AAIH;;;sCAEYuB,K,EAAM;AACf,oBAAO,KAAKJ,UAAL,GACKd,IADL,CACU;AAAA,wBAAWF,QACPqB,MADO,CACA;AAAA,4BAAUd,OAAOV,IAAP,CAAYyB,WAAZ,GAA0BC,QAA1B,CAAmCH,MAAME,WAAN,EAAnC,CAAV;AAAA,kBADA,CAAX;AAAA,cADV,CAAP;AAGH;;;;;;;;;;;;;;;;;;;;KCzDQE,e,WAAAA,e;AACT,8BAAY/B,cAAZ,EAA2B;AAAA;;AACvB,cAAKgC,IAAL,GAAY,EAAZ;AACA,cAAKhC,cAAL,GAAsBA,cAAtB;AAEH;;;;iCAEM;AAAA;;AACJ,iBAAMiC,aAAaC,YAAY,YAAI;AAC9BC,yBAAQC,GAAR,CAAY,MAAKJ,IAAjB;AACA,qBAAIK,OAAOC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAc,CAAzB,CAAX;AACA,uBAAKxC,cAAL,CAAoByC,SAApB,CAA8B,MAAKzC,cAAL,CAAoBuB,UAApB,GACbd,IADa,CAEV,mBAAW;AACP,2BAAKuB,IAAL,CAAUU,IAAV,CAAenC,QAAQkB,IAAR,CAAa;AAAA,gCAAUX,OAAO6B,EAAP,KAAeN,OAAK,CAA9B;AAAA,sBAAb,EAA+CjC,IAA9D;AACH,kBAJS,CAA9B;AAMA,qBAAG,MAAK4B,IAAL,CAAUf,MAAV,IAAoB,EAAvB,EAA0B;AACtBkB,6BAAQC,GAAR,CAAY,WAAZ;AACAQ,mCAAcX,UAAd;AACH;AAEJ,cAdiB,EAchB,IAdgB,CAAnB;AAgBF;;;mCAEWY,S,EAAW;AACnB,iBAAMC,MAAM,KAAKd,IAAL,CAAUX,OAAV,CAAkBwB,SAAlB,CAAZ;AACA,iBAAIC,QAAQ,CAAC,CAAb,EAAgB,KAAKd,IAAL,CAAUe,MAAV,CAAiBD,GAAjB,EAAsB,CAAtB;AACnB","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 49564f50d2f7f4157597","import { RecipeService } from './services/recipes.service';\r\nimport { PizzeriaService } from './services/pizzeria.service';\r\n\r\nconst recipesService = new RecipeService();\r\nconst pizzeriaService = new PizzeriaService(recipesService);\r\n\r\npizzeriaService.start();\r\n\r\n\r\nfunction makePizza (name) {\r\n    pizzeriaService.sendPizza(name);\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","export class RecipeService{\r\n    constructor(){\r\n        this.recipes = null;\r\n    };\r\n\r\n\r\n   getRecipes(){\r\n        if(!this.recipes){\r\n            return fetch('http://localhost:3000/recipes')\r\n                            .then(response => response.json())\r\n                            .then(recipes => this.recipes = recipes);\r\n        }\r\n        else {\r\n            return Promise.resolve(this.recipes);\r\n        }\r\n    }\r\n\r\n\r\n    isRecipeCompliant(recipe, pizza) {\r\n        if (recipe.toppings.length !== pizza.toppings.length) return false;\r\n\r\n        return pizza.toppings.reduce((acc, topping) =>\r\n            acc \r\n            && recipe.toppings.indexOf(topping) !== -1 \r\n            && pizza.toppings.indexOf(topping) === pizza.toppings.lastIndexOf(topping)\r\n            , true);\r\n    }\r\n    \r\n    getPizzaRecipeName(pizza){\r\n        return this.getRecipes()\r\n            .then(recipes => {\r\n                return recipes.reduce(\r\n                    (acc,recipe) => \r\n                    acc \r\n                    || (this.isRecipeCompliant(recipe,pizza) ? recipe.name : false),\r\n                 false);\r\n            })\r\n    }\r\n\r\n    getRecipe(name){\r\n        return this.getRecipes()\r\n                   .then(recipes => recipes\r\n                            .find(recipe => recipe.name === name));   \r\n    }\r\n\r\n\r\n    getRecipesNames(){\r\n        return this.getRecipes()\r\n                   .then(recipes => recipes\r\n                            .map(recipe => recipe.name));\r\n\r\n    }\r\n\r\n    queryRecipes(query){\r\n        return this.getRecipes()\r\n                   .then(recipes => recipes\r\n                            .filter(recipe => recipe.name.toLowerCase().includes(query.toLowerCase())));   \r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/recipes.service.js","export class PizzeriaService{\r\n    constructor(recipesService){\r\n        this.pool = []\r\n        this.recipesService = recipesService\r\n\r\n    }\r\n\r\n    start(){\r\n       const intervalId = setInterval(()=>{\r\n            console.log(this.pool);\r\n            let alea = Math.floor(Math.random()*3);\r\n            this.recipesService.getRecipe(this.recipesService.getRecipes()\r\n                            .then(\r\n                                recipes => {\r\n                                    this.pool.push(recipes.find(recipe => recipe.id === (alea+1)).name);\r\n                                }\r\n                            ))\r\n            if(this.pool.length >= 10){\r\n                console.log('GAME OVER');\r\n                clearInterval(intervalId);\r\n            }\r\n           \r\n        },1000)\r\n\r\n    }\r\n\r\n     sendPizza (pizzaName) {\r\n        const idx = this.pool.indexOf(pizzaName);\r\n        if (idx !== -1) this.pool.splice(idx, 1);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/pizzeria.service.js"],"sourceRoot":""}